<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta charset="UTF-8">
    <title>Friend-Finder Survey</title>

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- Free Icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">
    
</head>

<body>
    <div class= "container">
        <h2> SURVEY QUESTIONS </h2>
        <hr>
        <h4><strong>About You</strong></h4>
        <form class= "needs-validation" novalidate>
            <div class="form-row align-items-left">
                <div class="col-auto">
                    <p style="margin: 8px 0;">Name (Required) :</p>
                </div>
                <div class="col-6">
                    <label class="sr-only" for="inlineFormInput">Name</label>
                    <input type="text" class="form-control mb-2" id="name-input">
                </div>
            </div>
            <div class ="form-row align-items-left">
                <div class= "col-auto">
                    <p style= "margin: 8px 0;">Photo (Required) :</p>
                </div>
                <div class="col-6">
                    <label class="sr-only" for="inlineFormInput">Photo</label>
                    <input type="text" class="form-control mb-2" id="photo-input">
                </div>
            </div>
        </form>

        <hr>

        <form class"form-inline">
            <label class="my-1 mr-2" for="question-1"><strong>Question 1: </strong> Your mind is always buzzing with unexplored ideas and plans.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-1">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-2"><strong>Question 2: </strong> Generally speaking, you rely more on your experience than your imagination.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-2">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-3"><strong>Question 3: </strong> You find it easy to stay relaxed and focused even when there is some pressure.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-3">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-4"><strong>Question 4: </strong> You rarely do something just out of sheer curiosity.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-4">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-5"><strong>Question 5: </strong> People can rarely upset you.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-5">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-6"><strong>Question 6: </strong> It is often difficult for you to relate to other people's feelings.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-6">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-7"><strong>Question 7: </strong> In a discussion, truth should be more important than people's sensitivities.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-7">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-8"><strong>Question 8: </strong> You rarely get carried away by fantasies and ideas.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-8">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-9"><strong>Question 9: </strong> You think that everyone's views should be respected regardless of whether they are supported by facts or not.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-9">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <label class="my-1 mr-2" for="question-10"><strong>Question 10: </strong> You feel more energetic after spending time with a group of people.</label>
            <select class="custom-select my-1 mr-sm-2" id="question-10">
                <option value="1">1 (Strongly Disagree)</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5 (Strongly Agree)</option>
            </select>

            <button style= "margin:10px 0;" type="submit" class="btn btn-primary btn-lg btn-block" id="submit"><i class="fa fa-check-circle" aria-hidden="true"></i> Submit</button>

        </form>

        <hr>

        <footer class= "footer">
            <div class= "container">
                <p style= "font-size: 14px;"><a href="/api/friends">API Friend List</a>  |  <a href="https://github.com/SGeorges/friendFinder">GitHub Repo</a></p>
            </div>
        </footer>
    </div>

    <div id= "results-modal" class="modal fade" role="dialog" style="display: none;">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h4 class="modal-title">Best Match</h4>
                    <button type="button" class="close" data-dismiss="modal">Ã—</button>
                </div>
                <div class="modal-body">
                    <h5 id= "match-name"></h5>
                    <img src= "#" alt="Best Match Image" class= "match-img">
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    
</body>

<!-- JQuery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script type= "text/javascript">
    $("#submit").on("click", function(event) {
        event.preventDefault();

        function validateForm() {
            var isValid = true;
            $("#name-input").removeClass("is-invalid");
            $("#name-input").removeClass("is-valid");
  
            $("#photo-input").removeClass("is-invalid");
            $("#photo-input").removeClass("is-valid");
            
            if ($("#name-input").val() === "") {
                isValid = false;
                $("#name-input").addClass("is-invalid");
            }
            else {
                $("#name-input").addClass("is-valid"); 
            }

            if ($("#photo-input").val() === ""){
                isValid = false; 
                $("#photo-input").addClass("is-invalid")
            }
            else {
                $("#photo-input").addClass("is-valid")
            }

            return(isValid);
        }

        console.log(validateForm());
        console.log($("#question-1").val())

        if (validateForm()) {
            var userData = {
                name: $("#name-input").val().trim(),
                photo: $("#photo-input").val().trim(),
                scores: [
                    $("#question-1").val(),
                    $("#question-2").val(),
                    $("#question-3").val(),
                    $("#question-4").val(),
                    $("#question-5").val(),
                    $("#question-6").val(),
                    $("#question-7").val(),
                    $("#question-8").val(),
                    $("#question-9").val(),
                    $("#question-10").val()
                ]
            };
            console.log(userData);

            $.post("/api/friends", userData, function(data){

                console.log("BEST MATCH : " + data.name);
                $("#match-name").text(data.name);
                $("#match-img").attr("src", data.photo);

                $("#results-modal").modal("show");
            });
        }
    });
</script>